#!/usr/bin/env bash

set -e -o pipefail -o nounset

readonly snip_dir="$HOME/snippet"

for snip in $snip_dir/*.json; do
    keyword="$(jq -r '.alfredsnippet.keyword' < "$snip")"
    file="$HOME/.snippy/$keyword"
    touch "$file"

    snippet="$(jq -r '.alfredsnippet.snippet' < "$snip")"

    echo "$snippet" > "$file"
done
